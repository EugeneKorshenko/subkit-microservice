<!DOCTYPE html>
<html data-ng-app="mobilecenter">
	<head>
		<title>Subkit DevCenter (Beta)</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="description" content="">

		<meta name="apple-mobile-web-app-title" content="UI Beta">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

		<link rel="apple-touch-icon" href="@locals.url/img/touch-icon-iphone.png">
		<link rel="apple-touch-icon" sizes="76x76" href="@locals.url/img/touch-icon-ipad.png">
		<link rel="apple-touch-icon" sizes="120x120" href="@locals.url/img/touch-icon-iphone-retina.png">
		<link rel="apple-touch-icon" sizes="152x152" href="@locals.url/img/touch-icon-ipad-retina.png">
		<link rel="apple-touch-startup-image" href="@locals.url/img/touch-startup-image.png" />
		<link rel="icon" type="image/ico" href="@locals.url/img/favicon.ico" />

		<link rel="stylesheet" href="@locals.url/css/style.css" type="text/css" media="screen" />
		<script src="@locals.url/libs/fastclick.js"></script>
		<script defer src="@locals.url/libs/angular.min.js"></script>
		<script defer src="@locals.url/libs/angular-sanitize.min.js"></script>
		<script defer src="@locals.url/libs/add2home.js"></script>
		<script defer src="@locals.url/sdk/subkit.js"></script>
		<script defer src="@locals.url/sdk/angularsubkit.js"></script>
		<script defer src="@locals.url/js/nav.js"></script>
		<script defer src="@locals.url/js/notification.js"></script>
		<script defer src="@locals.url/js/app.js"></script>
	</head>
	<body class="flat">
		<views style="width: 100%;">
			<div class="notification-bar"></div>
			<div data-ng-controller="LoginCtrl">
				<view data-content="login" next="info" nexttext="info" headertext="dev center">
					<form name="loginf">
						<div class="row">
							<input type="text" class="input" name="lusername" placeholder="username" data-ng-model="$parent.username" required>
						</div>
						<div class="row">
							<input type="password" class="input" name="lpassword" placeholder="password" data-ng-model="$parent.password" required>
						</div>
					</form>
					<div class="row">
						<button class="flatButton" data-ng-click="login()" ng-disabled="!loginf.$valid" title="Sign in">Sign In</button>
					</div>
				</view>
				<view data-content="info" class="hidden" back="login" backtext="back" headertext="info">
					<div class="rowtext">
						SubKit
					</div>
					<a href="/doc" target="_blank">API Documentation</a>
				</view>
			</div>
			<div data-ng-controller="MainCtrl">
				<view data-content="center" class="hidden" back="login" backtext="logout" nexttext="account" next="account" headertext="dev center">
					<div class="centerMenu">
						<go data-view="storage" class="tileButton largeTile" title="SubKit Data Storage">store</go>
						<go data-view="pubsub" class="tileButton largeTile" title="SubKit Publish/Subscribe">pubsub</go>
						<go data-view="statistics" class="tileButton largeTile" title="SubKit Statistics">stats</go>
					</div>
					<div class="centerMenu">
						<span data-ng-repeat="plugin in plugins">
							<go data-view="{{plugin.name}}" class="tileButton largeTile" title="{{plugin.name}}">{{plugin.name}}</go>
						</span>
					</div>
				</view>

				<span data-ng-repeat="plugin in plugins" >
					<script type="text/javascript-lazy" data-name="{{plugin.name}}" data-script="{{plugin.script}}"></script>
					<ng-include src="templateUrl(plugin)"></ng-include>
				</span>
			</div>
			<div data-ng-controller="StorageCtrl">
				<view data-content="storage" class="hidden" backtext="center" headertext="Store">
					<div class="menu">
						<button data-ng-click="previous()" data-ng-show="hasParent()" class="tileButton mediumTile" title="Return to previous Item">previous</button>
						<button data-ng-click="json(key)" data-ng-show="isJSON()" class="tileButton mediumTile" title="Edit JSONObject">json</button>
					</div>
					<form name="storefnewstore">
						<div class="table">
							<div class="tablerow">
								<div class="tablecell">
									<input type="text" placeholder="new" data-ng-model="$parent.itemName" name="newstore" required ng-minlength="3">
								</div>
								<div class="tablecell30">
									<button class="rotateButton" data-ng-click="create(itemName)" ng-disabled="!storefnewstore.$valid" title="Add Item">+</button>
								</div>
							</div>
						</div>
					</form>
					<div class="table">
						<div class="tablerow" data-ng-repeat="store in stores">
							<div class="tablecell pointer" title="Administer '{{store.key}}'" data-ng-click="(!store.value) ? next(store.key) : edit(store.dataKey)">
								<span data-ng-bind="store.key"></span>
							</div>
							<div class="tablecell30">
								<button class="rotateButton" data-ng-click="remove(store.dataKey)" title="Remove '{{store.key}}'">&ndash;</button>
							</div>
						</div>
					</div>
				</view>
				<view data-content="valueeditor" class="hidden" headertext="Store/ValueEditor" backtext="store">
					<div class="row">
						<button class="flatButton" data-ng-click="saveValue()" ng-disabled="!storefveditor.$valid" title="Save changed Value">save</button>
					</div>
					<div class="rowtext">
						<span>Property: </span>
						<span data-ng-bind="keyData"></span>
					</div>
					<form name="storefveditor">
						<textarea data-ng-model="valueData[keyData]" class="codeeditor" rows="20" name="storeveditor" required></textarea>
					</form>
				</view>
				<view data-content="jsoneditor" class="hidden" headertext="Store/JsonEditor" backtext="store">
					<form name="storefjeditor">
						<textarea data-ng-model="$parent.jsonData" class="codeeditor" rows="20" name="storejeditor" required valid-json></textarea>
						<div class="row">
							<button class="flatButton" data-ng-click="saveJson()" ng-disabled="!storefjeditor.$valid" title="Save changed JSON">save</button>
						</div>
					</form>
				</view>
			</div>
			<div data-ng-controller="PubSubCtrl">
				<view data-content="pubsub" class="hidden" back="center" backtext="center" headertext="PubSub">
					<div class="menu"></div>
					<form name="pubsubfnewpub">
						<div class="table">
							<div class="tablerow">
								<div class="tablecell">
									<input type="text" class="input" placeholder="new" data-ng-model="$parent.channelName" name="newpub" required ng-minlength="3">
								</div>
								<div class="tablecell30">
									<button class="rotateButton" data-ng-click="create(channelName)" ng-disabled="!pubsubfnewpub.$valid" title="Add Channel">+</button>
								</div>
							</div>
						</div>
					</form>
					<div class="table">
						<div class="tablerow" data-ng-repeat="channel in channels">
							<div class="tablecell pointer" title="Administer Task: {{channel}}" data-ng-click="open(channel)">
								<span data-ng-bind="channel"></span>
							</div>
							<div class="tablecell30">
								<button class="rotateButton" data-ng-click="remove(channel)" title="Remove Task">&ndash;</button>
							</div>
						</div>
					</div>
				</view>
				<view data-content="channeleditor" class="hidden" headertext="PubSub/Channels" backtext="pubsub">
					<div class="menu">
						<button data-ng-click="subscribe(keyData)" class="tileButton largeTile" title="Subscribe to Channel '{{keyData}}'">subscribe</button>
						<button data-ng-click="unsubscribe(keyData)" class="tileButton largeTile" title="Unsubscribe from Channel '{{keyData}}'">unsubscibe</button>
					</div>
					<div class="status">
						<div class="table">
							<div class="tablerow">
								<div class="tablecell60">Channel</div>:&nbsp;
								<div class="tablecell"><span data-ng-bind="keyData"></div>
							</div>
							<div class="tablerow">
								<div class="tablecell60">Status</span></div>:&nbsp;
								<div class="tablecell"><span data-ng-bind="channelStatus" class="error"></div>
							</div>
						</div>
					</div>
					<div class="clear"></div>
					<hr>
					<form name="pubsubfnewval">
						<div class="table">
							<div class="tablerow">
								<div class="tablecell60 tBlue"><span>Value: </span></div>
								<div class="tablecell rstBorder"><input type="text" data-ng-model="messageValue" name="pubnewval" required></div>
								<div class="tablecell60"><button data-ng-click="publish(keyData, messageValue)" class="button" ng-disabled="!pubsubfnewval.$valid" title="Publish value to Channel '{{keyData}}'">publish</button></div>
							</div>
						</div>
					</form>
					<div class="codepreview">
						<ul>
							<li data-ng-repeat="message in messageLog">
								<div data-ng-bind="message"></div>
							</li>
						</ul>
					</div>
				</view>
			</div>
			<div data-ng-controller="StatisticsCtrl">
				<view data-content="statistics" class="hidden" back="center" backtext="center" headertext="Statistics">
					<div class="menu">
						<div class="tileButton largeTile">
							<span class="light">Connections</span>
							<div class="big" data-ng-bind="connections" title="Overall connections made to your SubKit"></div>
						</div>
						<div class="tileButton largeTile">
							<span class="light">Transfers</span>
							<span class="light">KB</span>
							<div class="big" data-ng-bind="totalKBytes" title="Overall KiB transferred from and to your SubKit"></div>
						</div>
						<div class="tileButton largeTile">
							<span class="light">Requests</span>
							<div class="big" data-ng-bind="requestNumber" title="Overall requests made to you SubKit"></div>
						</div>
						<div class="tileButton largeTile">
							<span class="light">DB</span>
							<span class="light">KB</span>
							<div class="big" data-ng-bind="dbSizeKBytes" title="Your Subkit's storage size in KiB"></div>
						</div>
					</div>
					<div style="clear: both;" title="Overall URL requested from your SubKit">
						<h1 class="rowtext small" style="font-weight: bold;">Urls Count</h1>
						<ul class="arrowlist">
							<li data-ng-repeat="url in urls">
								<div class="rowtext small">
									<span data-ng-bind="url.value" style="font-weight: bold;"></span>
									<span data-ng-bind="url.key"></span>
								</div>
							</li>
						</ul>
						<h1 class="rowtext small" style="font-weight: bold;">Agents Count</h1>
						<ul class="arrowlist" title="Recognized agents calling your SubKit">
							<li data-ng-repeat="agent in agents">
								<div class="rowtext small">
									<span data-ng-bind="agent.value" style="font-weight: bold;"></span>
									<span data-ng-bind="agent.key"></span>
								</div>
							</li>
						</ul>
						<h1 class="rowtext small" style="font-weight: bold;">Transfers Count</h1>
						<ul class="arrowlist" title="Transfers made to and from your SubKit">
							<li data-ng-repeat="transfer in transfers">
								<div class="rowtext small">
									<span data-ng-bind="transfer.value" style="font-weight: bold;"></span>
									<span data-ng-bind="transfer.key"></span>
								</div>
							</li>
						</ul>
					</div>
				</view>	
			</div>
			<div data-ng-controller="AccountCtrl" name="account">
				<view data-content="account" class="hidden" back="center" backtext="back" headertext="Account">
					<form name="account">
						<div class="row">
							<button class="flatButton" data-ng-click="save()" ng-disabled="!account.$valid" title="Save account">save</button>
						</div>
						<h3 class="subHead">General Informations</h3>
						<div class="rowtext">
							<span>Domain: </span>
							<span data-ng-bind="domain"></span>
						</div>
						<div class="rowtext">
							<input type="text" data-ng-model="apiKey" placeholder="API Key" required>
						</div>
						<div class="rowtext">
							<input type="text" data-ng-model="username" placeholder="Username" required>
						</div>
						<div class="rowtext">
							<input type="password" placeholder="Current Password" placeholder="Current Password">
						</div>
						<div class="rowtext">
							<input type="password" data-ng-model="newpassword" placeholder="New Password">
						</div>
						<div class="rowtext">
							<input type="password" data-ng-model="newpasswordValidation" placeholder="Repeat New Password">
						</div>
					</form>
				</view>
			</div>
		</views>
	</body>
</html>
